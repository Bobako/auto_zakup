<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="{{url_for('static',filename = 'styles.css')}}">
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="{{url_for('static', filename='new_el_button.js')}}"></script>
    <script src="{{url_for('static', filename='vendors.js')}}"></script>
    <script src="{{url_for('static', filename='antidpr.js')}}"></script>
    <title>Vendors</title>
</head>
<body>
<main>
    <h1>Поставщики</h1>
    <div id="vendors">
        <form id="vendors_form" action="" method="post">
            {%for vendor in vendors%}
            <div class="db_el">

                <input type="text" name="{{vendor.id}}:name" placeholder="Название" value="{{vendor.name}}">
                <input type="text" name="{{vendor.id}}:tg_id" placeholder="ID чата" value="{{vendor.tg_id}}">
                <button type="button" class="fell_btn" onclick="fell(this)">Расписание</button>
                <div class="fell_div fell_hidden">
                    {%for i in range(days|length)%}
                    {%if i in vendor.get_sch()%}
                    <input type="checkbox" id="{{vendor.id}}:schedule{{i}}" checked name="{{vendor.id}}:schedule{{i}}">
                    {%else%}
                    <input type="checkbox" id="{{vendor.id}}:schedule{{i}}" name="{{vendor.id}}:schedule{{i}}">
                    {%endif%}
                    <label for="{{vendor.id}}:schedule{{i}}">{{days[i]}}</label><br>
                    {%endfor%}
                </div>
                <span class="cb_span">
                    <input class="norm" type="checkbox" id="delete" name="{{vendor.id}}:delete">
                    <label class="norm" for="delete">Удалить</label>
                </span>
                <br>


                <div class="inline">
                    <input class="hidden product" type="text" name="{{vendor.id}}:products_ids"
                           value="{%for product in vendor.products%}{{product.id}}:{%endfor%}">

                    <div class="multi_box">
                        {%for product in vendor.products%}
                        <span class="multi_el" id="{{product.id}}" onclick="removeElement(this, 'product')">
                        {{product.name}}
                    </span>
                        {%endfor%}

                        <select onchange="addElement(this, 'product')">
                            <option value="placeholder">Новый товар</option>
                            {%for product in products%}
                            {%if product not in vendor.products%}
                            <option value={{product.id}}>{{product.name}}</option>
                            {%endif%}
                            {%endfor%}
                        </select>

                    </div>


                    <input class="hidden facility" type="text" name="{{vendor.id}}:facilities_ids"
                           value="{%for facility in vendor.facilities%}{{facility.id}}:{%endfor%}">
                    <div class="multi_box right">
                        {%for facility in vendor.facilities%}
                        <span class="multi_el" id="{{facility.id}}" onclick="removeElement(this, 'facility')">
                        {{facility.name}}
                    </span>
                        {%endfor%}

                        <select onchange="addElement(this, 'facility')">
                            <option value="placeholder">Новое заведение</option>
                            {%for facility in facilities%}
                            {%if facility not in vendor.facilities%}
                            <option value={{facility.id}}>{{facility.name}}</option>
                            {%endif%}
                            {%endfor%}
                        </select>

                    </div>
                </div>

            </div>
            {%endfor%}

            <div id="new_el_div">

            </div>

            <input class="micro_btn right" type="submit" value="Сохранить">
        </form>
        <button class="micro_btn" id="new_el_button">Новый поставщик</button>


        <div class="template">
            <input type="text" name="NEW:name" placeholder="Название">
            <input type="text" name="NEW:tg_id" placeholder="ID чата">
            <button type="button" class="fell_btn" onclick="fell(this)">Расписание</button>
            <div class="fell_div fell_hidden">
                {%for i in range(days|length)%}
                <input type="checkbox" id="NEW:schedule{{i}}" name="NEW:schedule{{i}}">
                <label>{{days[i]}}</label><br>
                {%endfor%}
            </div>
            <br>


            <div class="inline">

                <input class="hidden product" type="text" name="NEW:products_ids"
                       value="">
                <div class="multi_box">
                    <select onchange="addElement(this, 'product')">
                        <option value="placeholder">Новый товар</option>
                        {%for product in products%}
                        <option value={{product.id}}>{{product.name}}</option>
                        {%endfor%}
                    </select>

                </div>


                <input class="hidden facility" type="text" name="NEW:facilities_ids"
                       value="">
                <div class="multi_box right">
                    <select onchange="addElement(this, 'facility')">
                        <option value="placeholder">Новое заведение</option>
                        {%for facility in facilities%}
                        <option value={{facility.id}}>{{facility.name}}</option>
                        {%endfor%}
                    </select>

                </div>
            </div>
        </div>


    </div>


</main>

<nav>
    <button class="nav_button hiden_nav_button"></button>
    <div class="hidden_nav_div">
        <a href="{{url_for('index')}}">Заказы</a>
        <a href="{{url_for('vendors_page')}}">Поставщики</a>
        <a href="{{url_for('facilities_page')}}">Заведения</a>
        <a href="{{url_for('users_page')}}">Пользователи</a>
        <a href="{{url_for('products_page')}}">Товары</a>
        <a href="{{url_for('units_page')}}">Единицы измерения</a>
        <a href="{{url_for('stats_page')}}">Статистика</a>
        <a href="{{url_for('noti_page')}}">Оповещения</a>
        <a href="{{url_for('order_format')}}">Формат заказа</a>
        <a href="{{url_for('login')}}">Сменить аккаунт</a>
    </div>
</nav>

</body>
</html>